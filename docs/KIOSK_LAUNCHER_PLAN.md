# Custom Kiosk Launcher –∑–∞ Android 12+ - –ü–ª–∞–Ω –∑–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (v2)

## üìã –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–¶–µ–ª:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ custom –∫–∏–æ—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞ Android —Ç–µ—Ä–º–∏–Ω–∞–ª–∏ –≤ —Å–∫–ª–∞–¥, —Å –º–æ–¥—É–ª–µ–Ω –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª, –ø–∞—Ä–æ–ª–∞ –∑–∞—â–∏—Ç–∞ –∏ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏ —Ä–µ–∂–∏–º–∏ –Ω–∞ –∑–∞–∫–ª—é—á–≤–∞–Ω–µ.

**–¶–µ–ª–µ–≤–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Android 12+
**–ï–∑–∏–∫:** Kotlin
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** MVVM —Å Clean Architecture –µ–ª–µ–º–µ–Ω—Ç–∏ (UseCase, Repository)
**UI:** Jetpack Compose

---

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–∏ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è

### 1. **–û—Å–Ω–æ–≤–µ–Ω —Ä–µ–∂–∏–º (Kiosk Mode)**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Ä–∞–±–æ—Ç–∏ –∫–∞—Ç–æ —Å–∏—Å—Ç–µ–º–µ–Ω launcher (–Ω–∞—á–∞–ª–µ–Ω –µ–∫—Ä–∞–Ω).
- –ü–æ–∫–∞–∑–≤–∞ —Å–∞–º–æ –∏–∑–±—Ä–∞–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ grid layout.

### 2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ç–∞**
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ä—Ç –º–æ–∂–µ –¥–∞ –∏–∑–±–∏—Ä–∞ –∫–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–∞ –±—ä–¥–∞—Ç –≤–∏–¥–∏–º–∏ –≤ –∫–∏–æ—Å–∫ —Ä–µ–∂–∏–º.
- –°–ø–∏—Å—ä–∫—ä—Ç —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–µ –¥–∞ —Å–µ –æ–±–Ω–æ–≤—è–≤–∞ (pull-to-refresh).

### 3. **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª (–ù–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)**
- –î–æ—Å—Ç—ä–ø –¥–æ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞ —á—Ä–µ–∑ –∏–∫–æ–Ω–∞ –Ω–∞ launcher –µ–∫—Ä–∞–Ω–∞ (—Å–ª–µ–¥ –ø–∞—Ä–æ–ª–∞).
- –ü–∞–Ω–µ–ª—ä—Ç –µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–∞–Ω –∫–∞—Ç–æ —Å–∏—Å—Ç–µ–º–µ–Ω –µ–∫—Ä–∞–Ω –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Å–ª—É–∂–µ—â –∫–∞—Ç–æ **—Ä–∞–∑–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª–µ–Ω —Ü–µ–Ω—Ç—ä—Ä**.

### 4. **–†–∞–∑—à–∏—Ä–µ–Ω–∏ —Ä–µ–∂–∏–º–∏ –Ω–∞ –∑–∞–∫–ª—é—á–≤–∞–Ω–µ**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω —Å—Ç–∞—Ä—Ç:** –ï–¥–Ω–æ –∏–∑–±—Ä–∞–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ—Ç —Å–ø–∏—Å—ä–∫–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏) –º–æ–∂–µ –¥–∞ —Å–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ª–µ–¥ —Ä–µ—Å—Ç–∞—Ä—Ç.
- **–ó–∞–∫–ª—é—á–≤–∞–Ω–µ (Lock Task Mode):** –ü—ä–ª–Ω–æ –∑–∞–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ, –∫–æ–≥–∞—Ç–æ –∫–∏–æ—Å–∫ —Ä–µ–∂–∏–º—ä—Ç –µ –∞–∫—Ç–∏–≤–µ–Ω.
- **–°–∏–≥—É—Ä–µ–Ω –∏–∑—Ö–æ–¥:** –ò–∑—Ö–æ–¥—ä—Ç –æ—Ç –∑–∞–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º —Å—Ç–∞–≤–∞ —á—Ä–µ–∑ —Å–∫—Ä–∏—Ç –∂–µ—Å—Ç, —É–ø—Ä–∞–≤–ª—è–≤–∞–Ω –æ—Ç `OverlayService`.

### 5. **–°–∏–≥—É—Ä–Ω–æ—Å—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª**
- –ü–∞—Ä–æ–ª–∞ –∑–∞ –¥–æ—Å—Ç—ä–ø –¥–æ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞.
- –ë–ª–æ–∫–∏—Ä–∞–Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∏ –±—É—Ç–æ–Ω–∏ (back, home, recents) —á—Ä–µ–∑ `Device Owner` –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏.

---

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ database/ (Room: DAO, Entity, Database)
‚îÇ   ‚îî‚îÄ‚îÄ datastore/ (DataStore: KioskPreferences)
‚îÇ   ‚îî‚îÄ‚îÄ repository/ (KioskRepository)
‚îú‚îÄ‚îÄ di/ (Hilt Modules)
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îî‚îÄ‚îÄ usecase/ (GetInstalledAppsUseCase)
‚îú‚îÄ‚îÄ presentation/
‚îÇ   ‚îú‚îÄ‚îÄ launcher/ (LauncherScreen, LauncherViewModel)
‚îÇ   ‚îú‚îÄ‚îÄ password/ (PasswordDialog, PasswordViewModel)
‚îÇ   ‚îú‚îÄ‚îÄ admin/ (AdminScreen - –Ω–æ–≤–∏—è—Ç —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª)
‚îÇ   ‚îú‚îÄ‚îÄ app_selection/ (AppSelectionScreen, AppSelectionViewModel - –ø—Ä–µ–∏–º–µ–Ω—É–≤–∞–Ω–∏—è—Ç AdminScreen)
‚îÇ   ‚îú‚îÄ‚îÄ kiosk_settings/ (KioskSettingsScreen, KioskSettingsViewModel)
‚îÇ   ‚îî‚îÄ‚îÄ auto_start/ (AutoStartScreen, AutoStartViewModel)
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ BootReceiver.kt
    ‚îî‚îÄ‚îÄ OverlayService.kt
```

---

## üì± –ï–∫—Ä–∞–Ω–∏ –∏ UI Flow (–ù–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

1.  **`LauncherScreen`** (–ù–∞—á–∞–ª–µ–Ω –µ–∫—Ä–∞–Ω)
    - –ü–æ–∫–∞–∑–≤–∞ grid —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    - –ò–∫–æ–Ω–∞ (‚öôÔ∏è) –≤ –≥–æ—Ä–Ω–∏—è –¥–µ—Å–µ–Ω —ä–≥—ä–ª, –∫–æ—è—Ç–æ –æ—Ç–≤–∞—Ä—è `PasswordDialog`.

2.  **`PasswordDialog`** (–ú–æ–¥–∞–ª–µ–Ω –¥–∏–∞–ª–æ–≥)
    - –ü—Ä–∏ —É—Å–ø–µ—à–Ω–∞ –ø–∞—Ä–æ–ª–∞, –Ω–∞–≤–∏–≥–∏—Ä–∞ –¥–æ `AdminScreen`.

3.  **`AdminScreen`** (–ù–æ–≤–∏—è—Ç —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª–µ–Ω —Ü–µ–Ω—Ç—ä—Ä)
    - –ò–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ —Å–∏—Å—Ç–µ–º–µ–Ω –µ–∫—Ä–∞–Ω –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–ø–∏—Å—ä–∫ —Å –æ–ø—Ü–∏–∏).
    - –û–ø—Ü–∏–∏:
        - **System Settings:** –û—Ç–≤–∞—Ä—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ Android.
        - **Allowed Apps:** –ù–∞–≤–∏–≥–∏—Ä–∞ –¥–æ `AppSelectionScreen`.
        - **Kiosk Settings:** –ù–∞–≤–∏–≥–∏—Ä–∞ –¥–æ `KioskSettingsScreen`.
        - **Auto-Start App:** –ù–∞–≤–∏–≥–∏—Ä–∞ –¥–æ `AutoStartScreen`.
        - **Exit Kiosk Mode:** –î–µ–∞–∫—Ç–∏–≤–∏—Ä–∞ –∫–∏–æ—Å–∫–∞ –∏ –≤—Ä—ä—â–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—è launcher.

4.  **`AppSelectionScreen`** (–ü—Ä–µ–¥–∏—à–Ω–∏—è—Ç `AdminScreen`)
    - –°–ø–∏—Å—ä–∫ —Å –≤—Å–∏—á–∫–∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏–∫–æ–Ω–∏ –∏ `Switch`.
    - Pull-to-refresh –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ —Å–ø–∏—Å—ä–∫–∞.
    - `TopAppBar` —Å –±—É—Ç–æ–Ω "Save".

5.  **`KioskSettingsScreen`** (–ù–æ–≤, —Ñ–æ–∫—É—Å–∏—Ä–∞–Ω –µ–∫—Ä–∞–Ω)
    - `TopAppBar` —Å –±—É—Ç–æ–Ω "Back".
    - –ï–¥–∏–Ω-–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω `Switch` –∑–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ "Kiosk Mode Active".

6.  **`AutoStartScreen`** (–ù–æ–≤ –µ–∫—Ä–∞–Ω)
    - `TopAppBar` —Å –±—É—Ç–æ–Ω "Back".
    - –°–ø–∏—Å—ä–∫ **—Å–∞–º–æ** —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    - **–†–∞–¥–∏–æ –±—É—Ç–æ–Ω–∏** –∑–∞ –∏–∑–±–æ—Ä –Ω–∞ –µ–¥–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ "None").

---

## üîÑ –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ - Key Components

(–û—Å–Ω–æ–≤–Ω–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –æ—Å—Ç–∞–≤–∞—Ç —Å—ä—â–∏—Ç–µ, –Ω–æ —â–µ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤–∏ ViewModel-–∏ –∑–∞ –Ω–æ–≤–∏—Ç–µ –µ–∫—Ä–∞–Ω–∏)

---

## üöÄ –§–∞–∑–∏ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–†–µ–≤–∏–∑–∏—Ä–∞–Ω –ø–ª–∞–Ω)

### **–§–∞–∑–∞ 1: –û—Å–Ω–æ–≤–∏ (–ó–∞–≤—ä—Ä—à–µ–Ω–∞)**
- ...

### **–§–∞–∑–∞ 2: UI –°–∫–µ–ª–µ—Ç (–ó–∞–≤—ä—Ä—à–µ–Ω–∞)**
- ...

### **–§–∞–∑–∞ 3: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç (–ó–∞–≤—ä—Ä—à–µ–Ω–∞)**
- ...

### **–§–∞–∑–∞ 4: –ó–∞–∫–ª—é—á–≤–∞–Ω–µ (–ó–∞–≤—ä—Ä—à–µ–Ω–∞)**
- ...

### **–§–∞–∑–∞ 5: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª–∞ (–¢–µ–∫—É—â–∞ —Ñ–∞–∑–∞)**
1.  **–ü—Ä–µ–∏–º–µ–Ω—É–≤–∞–Ω–µ:**
    - `AdminScreen` -> `AppSelectionScreen`
    - `AdminViewModel` -> `AppSelectionViewModel`
2.  **–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤ `AdminScreen` (–†–∞–∑–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª):**
    - –î–∞ —Å–µ —Å—ä–∑–¥–∞–¥–µ UI-a —Å—ä—Å —Å–ø–∏—Å—ä–∫–∞ –æ—Ç –æ–ø—Ü–∏–∏.
3.  **–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ `KioskSettingsScreen`:**
    - –ù–æ–≤ –µ–∫—Ä–∞–Ω —Å –µ–¥–∏–Ω `Switch`.
4.  **–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ `AutoStartScreen`:**
    - –ù–æ–≤ –µ–∫—Ä–∞–Ω —Å—ä—Å —Å–ø–∏—Å—ä–∫ –æ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ä–∞–¥–∏–æ –±—É—Ç–æ–Ω–∏.
5.  **–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è—Ç–∞:**
    - –î–∞ —Å–µ —Å–≤—ä—Ä–∂–∞—Ç –≤—Å–∏—á–∫–∏ –Ω–æ–≤–∏ –µ–∫—Ä–∞–Ω–∏ –≤ `AppNavigation.kt`.

